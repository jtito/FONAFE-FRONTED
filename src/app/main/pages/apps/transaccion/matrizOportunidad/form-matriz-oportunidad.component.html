<p-toast></p-toast>
<div style="height: 50px;" class="bg-light"></div>
<!--DIALOGO AGREGAR / REPLICAR-->

<p-dialog header="CONTROL" [(visible)]="DisplayControl" [style]="{width: '40vw'}">

    <div class="container">


        <div class="form-group col-sm-12">
            <label for="float-input" class="mb-2">Seleccione cantidad</label>

            <select class="form-select" [(ngModel)]="SelectedCant">
                <option value="">Seleccione</option>

                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>


            </select>

        </div>
        <br>

        <div class="row">
            <div class="form-group col-sm-12">
                <button type="button" class="btn btn-primary" (click)="AgregarControl()">
                    Ingresar
                </button>


            </div>

        </div>


    </div>

</p-dialog>

<div class="bg-light pb-5">
    <div class="container matriz-amplitud pt-2 bg-white mb-5">
        <div class="container matriz-amplitud sombraCards espacioBody pb-5" *ngIf="!loading">
            <div class="row d-flex">
                <div style="width: 4%" class="mt-4">
                    <button pButton type="button"
                            icon="pi pi-arrow-left"
                            class="p-button-danger p-button-rounded"
                            [routerLink]="[matrizOportunidad== null ? '../':'../../']"
                    ></button>
                </div>
                <div style="width: 96%">
                    <h3 class="animated fadeIn fast mt-4" style="margin-bottom: -10px;" *ngIf="matrizOportunidad == null">
                        Crear Matriz de Oportunidades</h3>
                    <h3 class="animated fadeIn fast mt-4" style="margin-bottom: -10px;"
                        *ngIf="matrizOportunidad != null && editar == true">Actualizar Matriz de Oportunidades</h3>
                    <h3 class="animated fadeIn fast mt-4" style="margin-bottom: -10px;"
                        *ngIf="matrizOportunidad != null && editar == false">Ver Matriz de Oportunidades</h3>
                </div>
            </div>

            <hr>
            <br>
            <fieldset class="border p-2 animated fadeIn">
                <form id="formMatriz" [formGroup]="formularioMatrizOportunidad"
                    (ngSubmit)=" matrizOportunidad == null ? registrarMatrizRiesgo() : actualizarMatrizRiesgo()">

                    <!-- <legend class="w-auto" *ngIf="matrizOportunidad == null">&nbsp;Crear Matriz de Oportunidades
                    </legend>
                    <legend class="w-auto" *ngIf="matrizOportunidad != null && editar == true">&nbsp;Actualizar Matriz de Oportunidades</legend>
                    <legend class="w-auto" *ngIf="matrizOportunidad != null && editar == false">&nbsp;Ver Matriz de Oportunidades</legend>
                    <br><br> -->
                    <div class="container matriz-amplitud">
                        <div class="row">

                            <div class="form-group col-md-4 mb-4">
                                <label for="inputCartera" class="mb-2">Cartera</label>
                                <select class="form-select" id="inputCartera" disabled formControlName="cartera"
                                    (change)="onChangeCartera($event)">
                                    <option value="" selected>Seleccione</option>
                                    <option *ngFor="let cartera of listaCarteras" [value]="cartera.idParametro">
                                        {{ cartera.nombreParametro  }}</option>
                                </select>
                            </div>

                            <div class="form-group col-md-4 mb-4">
                                <label for="inputEmpresa" class="mb-2">Empresa</label>
                                <select class="form-select " id="inputEmpresa" [attr.disabled]="notadmin ? '' : null"
                                    aria-label="Default select example" formControlName="empresa"
                                    (change)="onChangeEmpresa($event)">
                                    <option value="" selected>Seleccione</option>
                                    <option *ngFor="let empresa of listaEmpresas" [value]="empresa.idEmpresa">
                                        {{ empresa.nombreCortoEmpresa  }}</option>
                                </select>
                            </div>

                            <div class="form-group col-md-4 mb-4">
                                <label for="inputSede" class="mb-2">Sede</label>
                                <select class="form-select" id="inputSede" [attr.disabled]="notadmin ? '' : null" formControlName="sede"
                                    (change)="onChangeSede($event)">
                                    <option value="" selected>Seleccione</option>
                                    <option *ngFor="let sede of listaSedes" [value]="sede.idSede">
                                        {{ sede.descripcionSede  }}</option>
                                </select>
                            </div>

                            <div class="form-group col-md-4 mb-4">
                                <label for="inputPeridoo" class="mb-2">Periodo</label>
                                <select class="form-select" id="inputPeridoo" (change)="onChangePeriodo($event)"
                                    formControlName="periodo" [class.is-invalid]="periodoNoValido">
                                    <option value="" selected>Seleccione</option>
                                    <option *ngFor="let periodo of listaPeriodos" [value]="periodo.idPeriodo">
                                        {{ periodo.deAnioPeriodo  }}</option>
                                </select>
                                <label *ngIf="periodoNoValido" id="validation-nombre-error"
                                       class="error jquery-validation-error small form-text invalid-feedback">Seleccione
                                    el periodo</label>
                            </div>

                            <div class="form-group col-md-4 mb-4">
                                <label for="idTipoMatriz" class="mb-2">Matriz Nivel</label>
                                <select formControlName="idTipoMatriz" class="form-select" id="idTipoMatriz" disabled
                                    (change)="onChangeTipoMatriz($event)" [class.is-invalid]="IdTipoMatrizNoValido">
                                    <option value="">Seleccione</option>
                                    <option selected *ngFor="let tipo of listaTiposMatriz"
                                        [value]="tipo.nombreParametro">{{ tipo.deValor1}}</option>
                                </select>
                                <label *ngIf="IdCargoNoValido" id="validation-nombre-error"
                                    class="error jquery-validation-error small form-text invalid-feedback">Seleccione
                                    el tipo de Matriz</label>
                            </div>

                            <div class="form-group col-md-4 mb-4">
                                <label for="inputMatrizNivel" class="mb-2">Tipo Matriz</label>
                                <select formControlName="idMatrizNivel" class="form-select" id="inputMatrizNivel" disabled
                                    aria-label="Default select example" (change)="onChangeMatrizNivel($event)">
                                    <option value="" selected>Seleccione</option>
                                    <option *ngFor="let tipoMatriz of listaTiposMatrizRiesgo"
                                        [value]="tipoMatriz.idParametro">{{ tipoMatriz.nombreParametro }}</option>
                                </select>
                            </div>

                            <div *ngIf="matrizRiesgo != null && editar == true && matrizRiesgo.indicadorBaja == '0'"
                                class="form-group col-md-4  mb-4">
                                <label for="idEstado" class="mb-2">Estado</label>
                                <select formControlName="idEstado" class="form-select" id="idEstado">
                                    <option selected *ngFor="let estado of listaEstados"
                                        [value]="estado.nombreParametro">{{ estado.deValor1}}</option>
                                </select>
                            </div>

                            <div class="container card-body p-text-left">
                                <button type="button" label="Añadir" pButton pRipple icon="pi pi-eye"
                                    class="p-button-secondary p-mr-2" [disabled] = "matrizOportunidad != null && editar == false"
                                    (click)="agregarMatrizRiesgo()" pButton icon="pi pi-plus" *ngIf="idPerfil!=tipoPerfilAuditor"></button>
                                
                                <img src="assets/imagenes/btnxls.png"
                                        pTooltip="XLS" style="float: right; width: 3%; cursor: pointer;"
                                        tooltipPosition="bottom" *ngIf="matrizOportunidad != null && editar == true"
                                        class="btnxls" (click)="exportExcel()">
                                    
                            </div>


                            <!-- Tabla de matriz de riesgo-->


                        </div>
                        <br>
                    </div>

                </form>

                <div class="">
                    <p-table class="static-table" [value]="matrizOportunidadDetalle" dataKey="ordenTabla" [columns]="cols"
                        styleClass="p-datatable-responsive-demo p-datatable-gridlines" [scrollable]="true"
                        scrollDirection="both"
                         scrollHeight="500px"
                        editMode="row">


                        <ng-template pTemplate="header" let-columns>

                            <tr>
                                <th class="text-center" colspan="19"
                                    style="width: 114rem;background: #D72F17;color: white;">
                                    IDENTIFICACIÓN
                                </th>

                                <th class="text-center" colspan="8"
                                    style="width: 48rem;background: #D72F17;color: white;">
                                    EVALUACIÓN
                                </th>

                                <th class="text-center" colspan="25"
                                    style="width: 150rem;background: #D72F17;color: white;">
                                    TRATAMIENTO
                                </th>

                                <th class="text-center" colspan="15"
                                    style="width: 90rem;background: #D72F17;color: white;">
                                    VERIFICACIÓN DE LA EFICACIA
                                </th>
                            </tr>



                            <tr style="justify-content: space-around;align-items: flex-start;">
                                <th pSortableColumn="{{col.ordenadmiento}}" [attr.colspan]="col.colspan" *ngFor="let col of columns"
                                    class="{{col.headerClass}}" >
                                    {{col.header}}
                                </th>
                                <th class="text-center tdsmall" colspan="1">
                                    Acción
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-editing="editing"
                            let-ri="rowIndex">
                            <tr [pEditableRow]="rowData" style="justify-content: space-around;align-items: flex-start;">
                                <td *ngFor="let col of columns" class="{{col.class}}" [attr.colspan]="col.colspan"
                                    pEditableColumn>
                                    <p-cellEditor>
                                        <ng-template pTemplate="input">
                                            <!-- <input pInputText class="text-center" type="text" [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">-->
                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field != 'ordenTabla' && col.field != 'idMatrizRiesgo' && col.field != 'idCodigoControl' &&  col.field != 'idGerencia' && col.field != 'idProceso' && col.field != 'idSubProceso'
                                                   && col.field != 'idOrigenRiesgo' && col.field != 'idFrecuenciaRiesgo' && col.field != 'idTipoRiesgo' && col.field != 'nuPuntajeInherente' && col.field != 'nuPuntajeResidual'
                                                   && col.field != 'idFrecuenciaControl' && col.field != 'idOportunidadControl' && col.field != 'deNivelPriori' && col.field != 'deSeveridadResidual' && col.field != 'idAreaControl' && col.field != 'idResponsableControl'
                                                   && col.field != 'idAutomatizacionControl' && col.field != 'nuProbabilidadInherente' && col.field != 'nuImpactoInherente' && col.field != 'nuProbabilidadResidual' && col.field != 'nuImpactoResidual'
                                                   && col.field != 'idEstrategiaPlan' && col.field !='recursoFina' && col.field != 'nuNivelPriori' && col.field != 'deOportunidad' && col.field != 'dePlanAccion'
                                                   && col.field != 'recursoOper' && col.field != 'recursoTecno' && col.field != 'recursoHuma' &&  col.field != 'reqNego' &&   col.field != 'idEstadoPlanAccion' &&  col.field != 'inEficaz' &&
                                                    col.field != 'fePrevista' && col.field != 'feVerificacion' && col.field != 'feIniPlanAccion' &&  col.field != 'feFinPlanAccion' && col.field != 'nuViabilidad' && col.field != 'nivelCosto' && col.field != 'nivelComplejidad' && col.field != 'NP' && col.field != 'idTipoBeneficio' && col.field !='NP' && col.field != 'nuBeneficio'
                                                   " class="text-center" type="text" [(ngModel)]="rowData[col.field]"
                                                placeholder="{{col.placeholder}}"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <textarea pInputTextarea [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"   *ngIf="col.field == 'deOportunidad'" rows="2" cols="40" autoResize="autoResize"
                                            [(ngModel)]="rowData[col.field]" ></textarea>
    
                                            <textarea pInputTextarea [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'dePlanAccion'" rows="2" cols="40" autoResize="autoResize"
                                            [(ngModel)]="rowData[col.field]" ></textarea>

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuViabilidad'" disabled
                                                (keyup)="Calculo_number_prob_viabilidad($event,ri)"
                                                (keydown)="Calculo_number_prob_viabilidad($event,ri)"
                                                class="text-center" type="number" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">


                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nivelCosto'"
                                                (keyup)="Calculo_number_viabilidad_costo($event,ri)"
                                                (keydown)="Calculo_number_viabilidad_costo($event,ri)"
                                                min="1.00" max="4.00" step="0.01"
                                                class="text-center" type="number" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">


                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nivelComplejidad'"
                                                (keyup)="Calculo_number_viabilidad_c($event,ri)"
                                                (keydown)="Calculo_number_viabilidad_c($event,ri)"
                                                min="1.00" max="4.00" step="0.01"
                                                class="text-center" type="number" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuNivelPriori'" disabled
                                                (keyup)="Calculo_number_NP_B_V($event,ri)"
                                                (keydown)="Calculo_number_NP_B_V($event,ri)" class="text-center"
                                                type="number" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuBeneficio'"
                                                (keyup)="Calculo_number_NP_B_V($event,ri)"
                                                (keydown)="Calculo_number_NP_B_V($event,ri)" class="text-center"
                                                type="number" [(ngModel)]="rowData[col.field]" min="1.00" max="4.00" step="0.01"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'feFinPlanAccion'"
                                                [(ngModel)]="rowData[col.field]" type="date">
                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'feIniPlanAccion'"
                                                [(ngModel)]="rowData[col.field]" type="date">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'fePrevista'"
                                                [(ngModel)]="rowData[col.field]" type="date">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'feVerificacion'"
                                                [(ngModel)]="rowData[col.field]" type="date">


                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuProbabilidadInherente'"
                                                [(ngModel)]="rowData[col.field]" class="text-center"
                                                (keyup)="limit_number_prob_riesgo($event,ri)"
                                                (keydown)="limit_number_prob_riesgo($event,ri)" type="text"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuImpactoInherente'"
                                                [(ngModel)]="rowData[col.field]" class="text-center"
                                                (keyup)="limit_number_impa_riesgo($event,ri)"
                                                (keydown)="limit_number_impa_riesgo($event,ri)" type="text"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <div *ngIf="col.field == 'deNivelPriori'">


                                                <div *ngIf="rowData[col.field]=='Bajo'">
                                                    <div class="circle-green">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Moderado'">
                                                    <div class="circle-yellow">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Alto'">
                                                    <div class="circle-orange">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Extremo'">
                                                    <div class="circle-red">{{rowData[col.field]}}</div>
                                                </div>

                                            </div>

                                            <div *ngIf="col.field == 'deSeveridadResidual'">


                                                <div *ngIf="rowData[col.field]=='Bajo'">
                                                    <div class="circle-green">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Moderado'">
                                                    <div class="circle-yellow">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Alto'">
                                                    <div class="circle-orange">{{rowData[col.field]}}</div>
                                                </div>

                                                <div *ngIf="rowData[col.field]=='Extremo'">
                                                    <div class="circle-red">{{rowData[col.field]}}</div>
                                                </div>

                                            </div>

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuProbabilidadResidual'"
                                                (keyup)="limit_number_prob_control($event,ri)"
                                                (keydown)="limit_number_prob_control($event,ri)" class="text-center"
                                                type="text" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">

                                            <input pInputText [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'nuImpactoResidual'"
                                                (keyup)="limit_number_impa_control($event,ri)"
                                                (keydown)="limit_number_impa_riesgo($event,ri)" class="text-center"
                                                type="text" [(ngModel)]="rowData[col.field]"
                                                [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]">
                                            <!--<p-dropdown  *ngIf="col.field == 'idGerencia'" [options]="this.listaGerencias"
                                                    [value]="rowData[col.field] == undefined ? rowData[col.field] = '' : rowData[col.field]"
                                                    [style]="{'width':'100%'}"></p-dropdown>-->
                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idGerencia'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="idGerencia">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let gerencia of listaGerencias"
                                                    [value]="gerencia.idGerencia">{{ gerencia.descripcionGerencia}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idEstrategiaPlan'"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idEstrategiaPlan">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let estregategia of listEstrategiaPlan"
                                                    [value]="estregategia.idParametro">
                                                    {{ estregategia.nombreParametro}}
                                                </option>
                                            </select>


                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idAreaControl'"
                                                [(ngModel)]="rowData[col.field]" class="form-select" id="idAreaControl"
                                                (change)="onChangeArea($event)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listaAreaResponsable"
                                                    [value]="area.idParametro">{{ area.nombreParametro  }}</option>
                                            </select>


                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idProceso'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="idProceso"
                                                (change)="onChangeProceso($event,ri)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let proceso of listaProcesosSelected"
                                                    [value]="proceso.idProceso">{{ proceso.deProceso}}</option>
                                            </select>
                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idSubProceso'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="idSubProceso"
                                                (change)="onChangeSubProceso($event)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let subproceso of matricesRiesgo[ri].listaSubProcesos"
                                                    [value]="subproceso.idSubProceso">{{ subproceso.deSubProceso}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idOrigenRiesgo' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idOrigenRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let origen of listaOrigenRiesgo"
                                                    [value]="origen.idParametro">{{ origen.nombreParametro  }}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idFrecuenciaRiesgo' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idFrecuenciaRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let frecuencia of listaFrecuenciaRiesgo"
                                                    [value]="frecuencia.idParametro">
                                                    {{ frecuencia.nombreParametro  }}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idTipoRiesgo' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select" id="idTipoRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaTipoRiesgo" [value]="tipo.idParametro">
                                                    {{ tipo.nombreParametro  }}</option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idFrecuenciaControl' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idFrecuenciaControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaFrecuenciaControl"
                                                    [value]="tipo.idParametro">{{ tipo.nombreParametro  }}</option>
                                            </select>


                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idOportunidadControl' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idOportunidadControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaOportunidadControl"
                                                    [value]="tipo.idParametro">{{ tipo.nombreParametro  }}</option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null" 
                                                *ngIf="col.field == 'idAutomatizacionControl' && rowData.idCodigoControl!=undefined"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idAutomatizacionControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaAutomatizacionControl"
                                                    [value]="tipo.idParametro">{{ tipo.nombreParametro  }}</option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idTipoBeneficio'"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idTipoBeneficio">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaTipoDeBeneficio"
                                                    [value]="tipo.idParametro">{{ tipo.nombreParametro  }}</option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'recursoFina'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="recursoFina">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'recursoOper'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="recursoOper">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'recursoTecno'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="recursoTecno">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    selected [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'recursoHuma'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="recursoHuma">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    selected [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>


                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'reqNego'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="reqNego">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listobtenerIndicadorSeleccionSINO"
                                                    [value]="area.idParametro">{{ area.nombreParametro  }}</option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'idEstadoPlanAccion'"
                                                [(ngModel)]="rowData[col.field]" class="form-select"
                                                id="idEstadoPlanAccion">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerobtenerEstadoPlanAccion"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>

                                            <select [attr.disabled]="ver ? '' : null || idPerfil==tipoPerfilUsuario ? '' : null"  *ngIf="col.field == 'inEficaz'" [(ngModel)]="rowData[col.field]"
                                                class="form-select" id="inEficaz">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listaobtenerPlanAccionEficaz"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>




                                        </ng-template>
                                        <ng-template *ngIf="col.field != 'idGerencia' && col.field != 'idProceso'
                                    && col.field != 'idSubProceso' && col.field != 'idOrigenRiesgo'  && col.field != 'deNivelPriori' && col.field != 'deSeveridadResidual'
                                    && col.field != 'idFrecuenciaRiesgo' && col.field != 'idTipoRiesgo'
                                     && col.field != 'idFrecuenciaControl' && col.field != 'idOportunidadControl' &&
                                     col.field != 'idEstrategiaPlan' && col.field != 'idProceso' && col.field != 'feIniPlanAccion' &&
                                     col.field != 'recursoFina' &&   col.field != 'feFinPlanAccion' &&
                                     col.field != 'recursoOper' && col.field != 'fePrevista' &&  col.field != 'feVerificacion' &&
                                     col.field != 'recursoTecno' && col.field != 'idTipoBeneficio' &&
                                     col.field != 'recursoHuma' &&
                                     col.field != 'reqNego' && col.field != 'idEstadoPlanAccion' &&
                                     col.field != 'inEficaz'    " pTemplate="output">
                                            <!--{{rowData[col.field]}}-->

                                            {{rowData[col.field]}}



                                        </ng-template>



                                        <ng-template *ngIf="col.field == 'idGerencia'" pTemplate="output">
                                            <select *ngIf="col.field == 'idGerencia'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idGerencia">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let gerencia of listaGerencias"
                                                    [value]="gerencia.idGerencia">{{ gerencia.descripcionGerencia}}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idEstrategiaPlan'" pTemplate="output">
                                            <select *ngIf="col.field == 'idEstrategiaPlan'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idEstrategiaPlan">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let estregategia of listEstrategiaPlan"
                                                    [value]="estregategia.idParametro">
                                                    {{ estregategia.nombreParametro}}
                                                </option>
                                            </select>
                                        </ng-template>


                                        <ng-template *ngIf="col.field == 'idResponsableControl'" pTemplate="output">
                                            <select *ngIf="col.field == 'idResponsableControl'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idResponsableControl" (change)="onChangeResponsable($event)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listaAreaResponsable"
                                                    [value]="area.idParametro">{{ area.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idAreaControl'" pTemplate="output">
                                            <select *ngIf="col.field == 'idAreaControl'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="idAreaControl" (change)="onChangeArea($event)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listaAreaResponsable"
                                                    [value]="area.idParametro">{{ area.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'recursoFina'" pTemplate="output">
                                            <select *ngIf="col.field == 'recursoFina'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="recursoFina" (change)="onChangeArea($event)">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'recursoOper'" pTemplate="output">
                                            <select *ngIf="col.field == 'recursoOper'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="recursoOper">

                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'recursoTecno'" pTemplate="output">
                                            <select *ngIf="col.field == 'recursoTecno'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="recursoTecno">

                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    selected [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>
                                        </ng-template>


                                        <ng-template *ngIf="col.field == 'recursoHuma'" pTemplate="output">
                                            <select *ngIf="col.field == 'recursoHuma'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="recursoHuma">

                                                <option *ngFor="let parameters of listobtenerIndicadorSeleccionSINO"
                                                    selected [value]="parameters.idParametro">
                                                    {{ parameters.nombreParametro}}
                                                </option>
                                            </select>
                                        </ng-template>


                                        <ng-template *ngIf="col.field == 'reqNego'" pTemplate="output">
                                            <select *ngIf="col.field == 'reqNego'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="reqNego">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listobtenerIndicadorSeleccionSINO"
                                                    [value]="area.idParametro">{{ area.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>


                                        <ng-template *ngIf="col.field == 'idTipoBeneficio'" pTemplate="output">
                                            <select *ngIf="col.field == 'idTipoBeneficio'" disabled
                                                [(ngModel)]="rowData[col.field]"
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idTipoBeneficio">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaTipoDeBeneficio"
                                                    [value]="tipo.idParametro">{{ tipo.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idEstadoPlanAccion'" pTemplate="output">

                                            <select *ngIf="col.field == 'idEstadoPlanAccion'"
                                                [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select"
                                                id="idEstadoPlanAccion">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listobtenerobtenerEstadoPlanAccion"
                                                    [value]="area.idParametro">
                                                    {{ area.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'inEficaz'" pTemplate="output">

                                            <select *ngIf="col.field == 'inEficaz'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                class="form-select" id="inEficaz">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let area of listaobtenerPlanAccionEficaz"
                                                    [value]="area.idParametro">
                                                    {{ area.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>



                                        <ng-template *ngIf="col.field == 'deNivelPriori'" pTemplate="output">

                                            <div *ngIf="rowData[col.field]=='Bajo'">
                                                <div class="circle-green">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Moderado'">
                                                <div class="circle-yellow">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Alto'">
                                                <div class="circle-orange">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Extremo'">
                                                <div class="circle-red">{{rowData[col.field]}}</div>
                                            </div>

                                        </ng-template>


                                        <ng-template *ngIf="col.field == 'deSeveridadResidual'" pTemplate="output">

                                            <div *ngIf="rowData[col.field]=='Bajo'">
                                                <div class="circle-green">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Moderado'">
                                                <div class="circle-yellow">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Alto'">
                                                <div class="circle-orange">{{rowData[col.field]}}</div>
                                            </div>

                                            <div *ngIf="rowData[col.field]=='Extremo'">
                                                <div class="circle-red">{{rowData[col.field]}}</div>
                                            </div>

                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idProceso'" pTemplate="output">
                                            <select *ngIf="col.field == 'idProceso'" disabled  [(ngModel)]="rowData[col.field]"
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idProceso">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let proceso of listaProcesosSelected"
                                                    [value]="proceso.idProceso">{{ proceso.deProceso}}</option>
                                            </select>
                                        </ng-template>

                                        <!--<ng-template *ngIf="col.field == 'idSubProceso'" pTemplate="output">
                                            <select *ngIf="col.field == 'idSubProceso'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idSubProceso">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let subproceso of matricesRiesgo[ri].listaSubProcesos"
                                                    [value]="subproceso.idSubProceso">{{ subproceso.deSubProceso}}
                                                </option>
                                            </select>
                                        </ng-template>-->


                                        <ng-template *ngIf="col.field == 'idOrigenRiesgo'" pTemplate="output">
                                            <select *ngIf="col.field == 'idOrigenRiesgo'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idOrigenRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let origen of listaOrigenRiesgo"
                                                    [value]="origen.idParametro">{{ origen.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idFrecuenciaRiesgo'" pTemplate="output">
                                            <select *ngIf="col.field == 'idFrecuenciaRiesgo'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idFrecuenciaRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let frecuencia of listaFrecuenciaRiesgo"
                                                    [value]="frecuencia.idParametro">{{ frecuencia.nombreParametro  }}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idTipoRiesgo'" pTemplate="output">
                                            <select *ngIf="col.field == 'idTipoRiesgo'" [(ngModel)]="rowData[col.field]"
                                                disabled class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idTipoRiesgo">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let tipo of listaTipoRiesgo" [value]="tipo.idParametro">
                                                    {{ tipo.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idFrecuenciaControl'" pTemplate="output">
                                            <select *ngIf="col.field == 'idFrecuenciaControl'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idFrecuenciaControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let frecuencia of listaFrecuenciaControl"
                                                    [value]="frecuencia.idParametro">{{ frecuencia.nombreParametro  }}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'feIniPlanAccion'" pTemplate="output">

                                            <input pInputText  *ngIf="col.field == 'feIniPlanAccion'"  class="form-select-hide" style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;" [(ngModel)]="rowData[col.field]" type="date">

                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'feFinPlanAccion'" pTemplate="output">

                                            <input pInputText  *ngIf="col.field == 'feFinPlanAccion'"  class="form-select-hide" style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;" [(ngModel)]="rowData[col.field]" type="date">

                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'fePrevista'" pTemplate="output">

                                            <input pInputText  *ngIf="col.field == 'fePrevista'"  class="form-select-hide" style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;" [(ngModel)]="rowData[col.field]" type="date">

                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'feVerificacion'" pTemplate="output">

                                            <input pInputText  *ngIf="col.field == 'feVerificacion'"  class="form-select-hide" style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;" [(ngModel)]="rowData[col.field]" type="date">

                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idOportunidadControl'" pTemplate="output">
                                            <select *ngIf="col.field == 'idOportunidadControl'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idOportunidadControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let oportunidad of listaOportunidadControl"
                                                    [value]="oportunidad.idParametro">{{ oportunidad.nombreParametro  }}
                                                </option>
                                            </select>
                                        </ng-template>

                                        <ng-template *ngIf="col.field == 'idAutomatizacionControl'" pTemplate="output">
                                            <select *ngIf="col.field == 'idAutomatizacionControl'"
                                                [(ngModel)]="rowData[col.field]" disabled
                                                class="form-select-hide form-select"
                                                style="border: 0px solid #ced4da;border-radius: .25rem;background-image:url();background-color: white;"
                                                id="idAutomatizacionControl">
                                                <option value="" selected>Seleccione</option>
                                                <option *ngFor="let automatizacion of listaAutomatizacionControl"
                                                    [value]="automatizacion.idParametro">
                                                    {{ automatizacion.nombreParametro  }}</option>
                                            </select>
                                        </ng-template>
                                    </p-cellEditor>
                                </td>
                                <td style="text-align:center;" class="tdsmall" colspan="1">
                                    <!-- <button pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                                        (click)="editarRegistro(rowData, ri)"
                                        class="p-button-rounded p-button-text"></button> -->
                                    <!--   <button
                                        *ngIf="!editing && rowData.idCodigoControl!=undefined && matricesRiesgo[ri].listaDetalleMatriz.length>0"
                                        pButton pRipple type="button" icon="pi pi-plus"
                                        (click)="replicarMatrices(rowData, ri)"
                                        class="p-button-rounded p-button-text"></button>-->

                                    <button *ngIf="(matrizOportunidad != null && editar == true) || matrizOportunidad == null" pButton pRipple type="button" icon="pi pi-trash"
                                        (click)="borrarRegistro(rowData, ri)"
                                        class="p-button-rounded p-button-text"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>

                <div>
                    <div class="row justify-content-between d-flex">
                        <div class="col">
                            <div class="container matriz-amplitud card-body">
                                <button pButton pRipple type="button"
                                        label="Mapa de Calor"
                                        class="p-button-raised p-button-warning"
                                        (click)="openDiagramRiesgoInherente()">
                                </button>

                            </div>
                        </div>

                        <div class="col">
                            <div class="container matriz-amplitud card-body p-text-right" style="margin-left: -15px;">
                                <button type="submit" class="btn btn-primary" form="formMatriz" style="margin-right: 10px;"
                                    *ngIf="matrizOportunidad == null">Crear
                                </button>
                                <button type="submit" class="btn btn-primary" form="formMatriz" style="margin-right: 10px;"
                                    *ngIf="matrizOportunidad != null && editar == true">Actualizar
                                </button>
                                <button type="button" class="btn btn-danger" [routerLink]="['..']" *ngIf="matrizOportunidad == null">
                                    Cancelar
                                </button>
                                <button type="button" class="btn btn-danger"
                                    [routerLink]="['/pages','main','transaccion','matrizOportunidad']"
                                    *ngIf="matrizOportunidad != null">Cancelar
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

            </fieldset>

            <br>

            <!-- Tabla de matriz de riesgo-->

        </div>


        <!--Skeleton -->
        <div class="container matriz-amplitud sombraCards espacioBody" *ngIf="loading">
            <h3 class="animated fadeIn fast mt-4" style="margin-bottom: -10px;">
                <p-skeleton height="2rem" styleClass="p-mb-2"></p-skeleton>
            </h3>

            <br>
            <hr>
            <form [formGroup]="formularioMatrizOportunidad"
                (ngSubmit)=" matrizOportunidad == null ? registrarMatrizRiesgo() : actualizarMatrizRiesgo()">
                <br>

                <fieldset class="border p-2 animated fadeIn">
                    <p-skeleton height="2rem" styleClass="p-mb-2"></p-skeleton>
                    <br><br>
                    <div class="container">
                        <div class="row">

                            <div class="form-group col-sm-12 mb-4">
                                <p-skeleton height="3rem" styleClass="p-mb-2"></p-skeleton>
                            </div>
                            <div class="form-group col-sm-12 mb-4">
                                <p-skeleton height="3rem" styleClass="p-mb-2"></p-skeleton>
                            </div>
                            <div class="container card-body p-text-right">
                                <p-skeleton height="3rem" styleClass="p-mb-2"></p-skeleton>
                            </div>
                        </div>
                        <br>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>